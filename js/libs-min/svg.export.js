(function(){function whitespaced(value,add,level){if(add){var whitespace="",space=add===!0?"  ":add||"";for(i=level-1;i>=0;i--)whitespace+=space;value=whitespace+value+"\n"}return value}SVG.extend(SVG.Element,{exportSvg:function(options,level){var i,il,width,height,well,clone,name=this.node.nodeName,node="";if(options=options||{},null==options.exclude||!options.exclude.call(this)){if(options=options||{},level=level||0,this instanceof SVG.Doc&&(node+=whitespaced('<?xml version="1.0" encoding="UTF-8"?>',options.whitespace,level),width=this.attr("width"),height=this.attr("height"),options.width&&this.attr("width",options.width),options.height&&this.attr("height",options.height)),node+=whitespaced("<"+name+this.attrToString()+">",options.whitespace,level),this instanceof SVG.Doc&&(this.attr({width:width,height:height}),node+=whitespaced("<desc>Created with svg.js [http://svgjs.com]</desc>",options.whitespace,level+1),node+=this.defs().exportSvg(options,level+1)),this instanceof SVG.Parent)for(i=0,il=this.children().length;il>i;i++)SVG.Absorbee&&this.children()[i]instanceof SVG.Absorbee?(clone=this.children()[i].node.cloneNode(!0),well=document.createElement("div"),well.appendChild(clone),node+=well.innerHTML):node+=this.children()[i].exportSvg(options,level+1);else if(this instanceof SVG.Text||this instanceof SVG.TSpan)for(i=0,il=this.node.childNodes.length;il>i;i++)node+=this.node.childNodes[i].instance instanceof SVG.TSpan?this.node.childNodes[i].instance.exportSvg(options,level+1):this.node.childNodes[i].nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&#34;").replace(/'/g,"&#39;");else SVG.ComponentTransferEffect&&this instanceof SVG.ComponentTransferEffect&&this.rgb.each(function(){node+=this.exportSvg(options,level+1)});node+=whitespaced("</"+name+">",options.whitespace,level)}return node},exportAttr:function(attr){return 0==arguments.length?this.data("svg-export-attr"):this.data("svg-export-attr",attr)},attrToString:function(){var key,value,attr=[],data=this.exportAttr(),exportAttrs=this.attr();if("object"==typeof data)for(key in data)"data-svg-export-attr"!=key&&(exportAttrs[key]=data[key]);for(key in exportAttrs)value=exportAttrs[key],"xlink"==key?key="xmlns:xlink":"href"==key&&(exportAttrs["xlink:href"]||(key="xlink:href")),"string"==typeof value&&(value=value.replace(/"/g,"'")),"data-svg-export-attr"!=key&&"href"!=key&&("stroke"!=key||parseFloat(exportAttrs["stroke-width"])>0)&&attr.push(key+'="'+value+'"');return attr.length?" "+attr.join(" "):""}})}).call(this);
